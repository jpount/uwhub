<div class="tasks-container">
  <!-- Header Section -->
  <header class="header">
    <div class="header-content">
      <div class="logo-section">
        <span class="logo">UW Hub</span>
      </div>
      <nav class="nav">
        <a routerLink="/" class="nav-link">Home</a>
        <a routerLink="/tasks" class="nav-link active">Tasks</a>
      </nav>
      <div class="user-section">
        <span class="user-name">Jane Smith</span>
        <div class="user-dropdown">â–¼</div>
      </div>
    </div>
  </header>

  <!-- Tasks Page Content -->
  <div class="tasks-content">
    <div class="page-header">
      <h1 class="page-title">Tasks</h1>
    </div>

    <!-- Task Tabs -->
    <div class="task-tabs">
      <div class="tab-nav">
        <button class="tab-btn personal-tab"
                [class.active]="viewMode() === 'personal'"
                (click)="setViewMode('personal')">
          <span class="tab-icon">ğŸ‘¤</span>
          Personal
        </button>
        <button class="tab-btn team-tab"
                [class.active]="viewMode() === 'team'"
                (click)="setViewMode('team')">
          <span class="tab-icon">ğŸ‘¥</span>
          Team view
        </button>
      </div>
    </div>

    <!-- Task Status Tabs -->
    <div class="status-tabs">
      <button 
        class="status-tab"
        [class.active]="activeTab() === 'open'"
        (click)="setActiveTab('open')">
        Open ({{ getTaskCounts().open }})
        <span class="notification-badge" *ngIf="getTaskCounts().open > 0">{{ getTaskCounts().open > 99 ? '99+' : getTaskCounts().open }}</span>
      </button>
      <button 
        class="status-tab"
        [class.active]="activeTab() === 'completed'"
        (click)="setActiveTab('completed')">
        Completed ({{ getTaskCounts().completed }})
      </button>
      <button 
        class="status-tab"
        [class.active]="activeTab() === 'all'"
        (click)="setActiveTab('all')">
        All ({{ getTaskCounts().all }})
      </button>
    </div>

    <!-- Last Updated Info -->
    <div class="last-updated">
      Last updated 31 Jul 25, 4:00pm
    </div>

    <!-- Tasks Table -->
    <div class="tasks-table-container">
      <table class="tasks-table" *ngIf="getCurrentTasks().length > 0; else noTasks">
        <thead>
          <tr>
            <th class="sortable">
              <span class="header-content">
                <span class="header-icon">ğŸ³ï¸</span>
                Account Name
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                NAIC Description
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                LOB/Products
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                Transaction type
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                Propensity to bind
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                Status
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                Target action date
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                Pending action
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable">
              <span class="header-content">
                Premium
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="sortable" *ngIf="viewMode() === 'team'">
              <span class="header-content">
                Assigned To
                <span class="sort-icons">â†•</span>
              </span>
            </th>
            <th class="pin-column">Pin</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of getCurrentTasks()" class="task-row">
            <td class="account-name">
              <div class="priority-flag" *ngIf="task.priority">ğŸ³ï¸</div>
              <a [routerLink]="['/task-detail', task.id]" class="task-link">
                {{ task.accountName }}<br>
                <small class="task-id">{{ task.id }}</small>
              </a>
            </td>
            <td class="naic-desc">{{ task.naicDescription }}</td>
            <td class="lob-products">{{ task.lobProducts }}</td>
            <td class="transaction-type">{{ task.transactionType }}</td>
            <td>
              <span class="propensity-badge" [ngClass]="getPropensityClass(task.propensityToBind)">
                {{ task.propensityToBind }}
              </span>
            </td>
            <td>
              <span class="status-badge" [ngClass]="getStatusClass(task.status)">
                {{ task.status }}
              </span>
            </td>
            <td class="target-date">{{ task.targetActionDate }}</td>
            <td class="pending-action">{{ task.pendingAction }}</td>
            <td class="premium">{{ formatPremium(task.premium) }}</td>
            <td class="assigned-to" *ngIf="viewMode() === 'team'">
              <span class="assignee-name" [class.current-user]="task.assignedTo === 'Jane Smith'">
                {{ task.assignedTo }}
              </span>
            </td>
            <td class="pin-column">
              <button class="pin-btn">ğŸ“Œ</button>
            </td>
          </tr>
        </tbody>
      </table>
      
      <ng-template #noTasks>
        <div class="no-tasks">
          <div class="no-tasks-icon">ğŸ“‹</div>
          <h3>No tasks found</h3>
          <p>There are no tasks matching the current filter.</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>
